
// ==========================================================================
//  GPPG error listing for yacc source file <parser.y - 5/7/2017 11:09:57 PM>
// ==========================================================================
//  Version:  1.5.2
//  Machine:  TUPHAM-LAPTOP
//  DateTime: 5/7/2017 11:10:00 PM
//  UserName: Ngoc Tu Pham
// ==========================================================================


%namespace GPLexTutorial

%union
{
    public int num;
    public string name;
    public CompilationUnit compUnit;
    public TypeDeclaration typeDecl;
    public NormalClassDeclaration normclassDecl;
    public ClassModifier classModi;  
    public Identifier identi;
    public ClassBody classBodi;
    public MethodDeclaration methDecl;
    public MethodModifier methModi;
    public List<MethodModifier> methmodilist;
    public Result result;
	public BlockStatement blksta;
	public BlockStatements blkstas;
	public VariableDeclarationStatement variablestate;
	public MethodDeclarator methodecla;
	public MethodHeader methodhea;
	public MethodBody methodbd;
	public ExpressionStatement expstm;
}

%token <num> NUMBER
%token <name> IDENT 
%token PUBLIC CLASS STATIC VOID INT
%token PRIVATE PROTECTED 

%left '=' 
%nonassoc '<'
%left '+'

%type <compUnit> CompilationUnit
%type <typeDecl> TypeDeclaration
%type <normclassDecl> NormalClassDeclaration
%type <classModi> ClassModifier
%type <identi> Identifier
%type <classBodi> ClassBody
%type <methModi> MethodModifier
%type <methDecl> MethodDeclaration
%type <methmodilist> MethodModifierList
%type <result> Result
%type <blksta> BlockStatement
%type <variablestate> VariableDeclarationStatement
%type <methodecla> MethodDeclarator
%type <methodhea> MethodHeader
%type <methodbd> MethodBody
%type <blkstas> BlockStatements
%type <expstm> ExpressionStatement

%%
// Warning: NonTerminal symbol "MethodModifierList" is unreachable
// Error: NonTerminal symbol "MethodModifierList" has no productions
// Error: There are 1 non-terminating NonTerminal Symbols
   //  {MethodModifierList}
// Warning: Terminating MethodModifierList fixes the following size-1 NonTerminal set
   // {MethodModifierList}
// ----------------------------------------------------------------------------------

CompilationUnit
	: PackageDeclaration ImportDeclarations TypeDeclaration   { $$=new CompilationUnit(null,null,$3); }
	;

empty: ;

PackageDeclaration
	: empty
	;

ImportDeclarations
	: ImportDeclaration ImportDeclarations  
	| empty
	;

ImportDeclaration
	: empty
	;

TypeDeclaration
	: NormalClassDeclaration   { $$ = new TypeDeclaration($1); }
	;

NormalClassDeclaration
	:ClassModifier CLASS Identifier TypeParameters '{' ClassBody '}'  {$$ = new NormalClassDeclaration($1,$3,$6);}
	;

ClassModifier
	: PUBLIC  
	;

TypeParameters
	: empty
	;

Identifier
	: IDENT  {$$ = new Identifier($1);}
	;

ClassBody
	: MethodDeclaration {$$ = new ClassBody($1);}
	| empty
	;

MethodDeclaration
    : MethodModifier MethodHeader MethodBody {$$ = new MethodDeclaration($1,$2,$3);}
    | empty
    ;

MethodModifier
    : PUBLIC STATIC
    | empty
    ;

MethodHeader
    : Result MethodDeclarator       {$$ = new MethodHeader($1,$2);}
    | empty
    ;

Result
    :VOID
    ;

MethodDeclarator
    :Identifier '(' FormalParameterList ')'  {$$ = new MethodDeclarator($1,null);}
    | empty
    ;

FormalParameterList
    : FormalParameterList FormalParameter    
    | empty
    ;

FormalParameter
    : VariableModifiers UnannType VariableDeclaratorId 
    ;

VariableModifiers
    :empty            
    ;

VariableDeclaratorId
    :empty            
    ;

UnannType
    :empty            
    ;

MethodBody
    : '{' BlockStatements '}'   {$$ = new MethodBody($2);} 
    ;

BlockStatements
    : BlockStatement BlockStatements  
    | empty
    ;

BlockStatement
    : VariableDeclarationStatement ExpressionStatement  {$$ = new BlockStatement($1,$2);}
    | empty 
    ;

VariableDeclarationStatement
    : empty                         
    ;

ExpressionStatement
    : empty                         
    ;

%%

public Parser(Scanner scanner) : base(scanner)
{

}
// ==========================================================================

